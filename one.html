<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Promise Data Display</title>
  </head>
  <body>
    <h1>Fetch Data with Promises</h1>
    <button id="fetchButton">Fetch User Data</button>
    <div id="output"></div>

    <script>
      // Function simulating an asynchronous data fetch
      function fetchData() {
        return new Promise((resolve, reject) => {
          // Simulate a network request with a delay
          setTimeout(() => {
            const success = true; // Set to false to simulate an error

            if (success) {
              const data = {
                name: "Athmika Gowda",
                age: 21,
                city: "Bangalore",
              };
              resolve(data); // Resolve the promise with the fetched data
            } else {
              reject("Failed to fetch data."); // Reject the promise with an error message
            }
          }, 2000); // Simulate a 2-second delay
        });
      }

      // Function to display the fetched data
      function displayData(data) {
        const outputDiv = document.getElementById("output");
        if (outputDiv) {
          outputDiv.innerHTML = `
      <h2>User Information:</h2>
      <p><strong>Name:</strong> ${data.name}</p>
      <p><strong>Age:</strong> ${data.age}</p>
      <p><strong>City:</strong> ${data.city}</p>
    `;
        } else {
          console.error("Output div not found.");
        }
      }

      // Function to display an error message
      function displayError(error) {
        const outputDiv = document.getElementById("output");
        if (outputDiv) {
          outputDiv.innerHTML = `<p style="color: red;">Error: ${error}</p>`;
        } else {
          console.error("Output div not found.");
        }
      }

      // Use the promise to fetch and display data
      document.addEventListener("DOMContentLoaded", () => {
        const button = document.getElementById("fetchButton");
        if (button) {
          button.addEventListener("click", () => {
            const outputDiv = document.getElementById("output");
            if (outputDiv) {
              outputDiv.innerHTML = "<p>Fetching data...</p>";
            }

            fetchData()
              .then((data) => {
                displayData(data); // Call displayData on successful data fetch
              })
              .catch((error) => {
                displayError(error); // Call displayError if the promise is rejected
              });
          });
        }
      });
    </script>
  </body>
</html>
